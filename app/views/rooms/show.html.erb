<h1>
  <%= @room.name %>
</h1>

<div class="row">
  <div class="col-12 col-md-3">
    <%= render partial: 'rooms' %>
  </div>
  <div class="chat" data-channel-subscribe="RoomChannel" data-room-id="<%= @room.id %>">
    <div class="col">

      <% @room_messages.each do |room_message| %>
      <div class="chat-message-container" data-role="message-template">
        <div class=" row no-gutters">


          <div class="col">
            <div class="message-content">
              <p class="mb-1" data-role="message-text">
                <%= room_message.message %>
              </p>

              <div class="text-right">
                <small data-role="message-date">
                  <%= room_message.created_at %>
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
    </div>

    <%= form_with(model: @room_message, local: true ) do |form| %>
    <div class="input-group mb-3">

      <%= form.label :message %>
      <%= form.text_field :message, class:'form-control validate new_room_message'%>
      <div class="input-group-append">
        <%= form.submit "Send", class: 'btn btn-primary chat-input' %>
      </div>
    </div>

    <%= form.text_field :room_id, as: :hidden %>
    <% end %>
  </div>
</div>